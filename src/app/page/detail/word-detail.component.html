<ow-hero>
    <ow-random-top [word]="word$ | async"></ow-random-top>
</ow-hero>

<article *ngIf="word$ | async as word; else error" class="word">
    <section class="detail">

        <div class="top">
            <h2 class="mono">{{word.theWord}}</h2>
            <div class="actions">
                <img alt="pencil in a circle with pink background"
                     src="/assets/image/pencil-circled.svg"
                     (click)="edit(word)"/>
                <img alt="synonyms" src="/assets/image/plus-circled.svg"/>
                <span (click)="likeWord($event, word)" [class.liked]="isLiked"></span>
            </div>
        </div>

        <p class="def">{{ word.definition }}</p>
        <p>{{ word.partOfSpeech }}</p>
        <div class="pair">
            <label>Origin:&nbsp;</label>
            <!-- <p>{{ word?.origin ?? 'N/A' }}</p> this should work...-->
            <p>{{ word?.origin ? word.origin : 'N/A' }}</p>
        </div>
        <div class="pair">
            <label>Example:&nbsp;</label>
            <p>{{word.exampleUsage ? word.exampleUsage : 'N/A' }}</p>
        </div>
        <div class="pair">
            <label>Pronunciation:&nbsp;</label>
            <p>{{word.pronunciation ? word.pronunciation : 'N/A' }}</p>
        </div>
        <div class="tags">
            <label>Associated Tags</label>
            <ow-tags [sTags]="tags"></ow-tags>
        </div>
        <div class="synonyms">
            <label>Synonyms</label>
            <ow-tags [sTags]="[]"></ow-tags>
        </div>
        <div class="pair">
            <label>Note:&nbsp;</label>
            <p class="note">{{word.note ? word.note : 'N/A' }}</p>
        </div>
    </section>

    <section class="meta">
        <div class="column">
            <div class="pair">
                <label>Created By:&nbsp;</label>
                <p>{{ word.createdBy }}</p>
            </div>
            <div class="pair">
                <label>Times Viewed:&nbsp;</label>
                <p>{{ word.timesViewed }}</p>
            </div>
        </div>
        <div class="column">
            <div class="pair creation-date" (click)="navToStats(word)">
                <label>Creation Date:&nbsp;</label>
                <p>{{ word.creationDate | date:'EEEE d MMMM y' }}</p>
            </div>
            <div class="pair">
                <label>Creation Time:&nbsp;</label>
                <p>{{ word.creationDate | date:'h:mm:ss a' }}</p>
            </div>
        </div>
    </section>

</article>

<ng-template #error>
    <ow-error *ngIf="state === 'error' else loading">
        <label>{{ errorMessage ?? 'no message available' }}</label>
    </ow-error>
</ng-template>

<ng-template #loading>
    <section class="loading">
        <h5>Loading...</h5>
    </section>
</ng-template>
